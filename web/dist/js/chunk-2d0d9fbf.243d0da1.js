(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d9fbf"],{"6a53":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-toolbar",{attrs:{flat:"",height:"64px"}},[a("v-toolbar-title",[e._v(e._s(e.$t("App.userManager")))])],1),a("v-card-title",[a("v-btn",{attrs:{color:"primary"},on:{click:e.createUser}},[e._v(e._s(e.$t("App.createUser")))]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"search",label:e.$t("Sys.search"),"single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{attrs:{headers:e.headers,items:e.desserts,search:e.search,"rows-per-page-text":e.$t("App.perPageText")},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.uid))]),a("td",{staticClass:"text-xs-center"},[e._v(e._s(t.item.nickname))]),a("td",{staticClass:"text-xs-center"},[e._v(e._s(t.item.login_name))]),a("td",{staticClass:"text-xs-center"},[e._v(e._s(t.item.phone))]),a("td",{staticClass:"text-xs-center"},[e._v(e._s(t.item.email))]),a("td",{staticClass:"text-xs-center"},[e._v(e._s(t.item.create_time))]),a("td",{staticClass:"text-xs-center"},[e._v(e._s(t.item.update_time))]),a("td",{staticClass:"text-xs-center"},[a("a-switch",{attrs:{checkedChildren:e.$t("Sys.enable"),unCheckedChildren:e.$t("Sys.disable")},on:{change:function(a){return e.setState(t)}},model:{value:t.item.status,callback:function(a){e.$set(t.item,"status",a)},expression:"props.item.status"}})],1),a("td",{staticClass:"text-xs-center"},[a("a-tag",{attrs:{color:"#108ee9"},on:{click:function(a){return e.editUser(t)}}},[e._v(e._s(e.$t("Sys.edit")))]),a("a-popconfirm",{attrs:{placement:"topLeft",okText:e.$t("Sys.yes"),cancelText:e.$t("Sys.no")},on:{confirm:function(a){return e.resetPwd(t)}}},[a("template",{slot:"title"},[a("p",[e._v(e._s(e.$t("Sys.resetPwdMsg")))])]),a("a-tag",{attrs:{color:"orange"}},[e._v(e._s(e.$t("Sys.resetPwd")))])],2)],1)]}}])}),a("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",{ref:"user"},[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.$t("App.userProfile")))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{ref:"nickname",attrs:{label:e.$t("App.nickname")+"*",rules:[e.rules.required]},model:{value:e.user.nickname,callback:function(t){e.$set(e.user,"nickname",t)},expression:"user.nickname"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{ref:"email",attrs:{label:e.$t("App.email")+"*",type:"email",rules:[e.rules.required]},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{ref:"phone",attrs:{label:e.$t("App.phone")+"*",type:"phone",rules:[e.rules.required]},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-autocomplete",{attrs:{items:e.roles,"item-text":"role_name","item-value":"role_id",label:e.$t("App.role"),chips:"",clearable:"",multiple:"","deletable-chips":"",required:""},model:{value:e.role_ids,callback:function(t){e.role_ids=t},expression:"role_ids"}})],1),a("v-flex",{attrs:{xs12:""}},[e.isCreate?a("v-text-field",{ref:"identity",attrs:{label:e.$t("App.identity")+"*",required:"",rules:[e.rules.required]},model:{value:e.addUser.identity,callback:function(t){e.$set(e.addUser,"identity",t)},expression:"addUser.identity"}}):e._e()],1),a("v-flex",{attrs:{xs12:""}},[e.isCreate?a("v-text-field",{ref:"credential",attrs:{label:e.$t("App.credential")+"*",rules:[e.rules.required,function(){return e.addUser.credential.length>=8||"Min 8 characters"}],"append-icon":e.show?"visibility":"visibility_off",type:e.show?"text":"password"},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.addUser.credential,callback:function(t){e.$set(e.addUser,"credential",t)},expression:"addUser.credential"}}):e._e()],1)],1)],1),a("small",[e._v(e._s(e.$t("Sys.requireMsg")))])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:e.close}},[e._v(e._s(e.$t("Sys.close")))]),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:e.createOrUpdateUser}},[e._v(e._s(e.$t("Sys.save")))])],1)],1)],1)],1)},i=[],r=(a("456d"),a("ac6a"),a("bc3a")),n=a.n(r),l={data:function(){return{search:"",show:"",dialog:!1,isCreate:!1,roles:[],rules:{required:function(e){return!!e||"Required."}},role_ids:[],user:{nickname:"",email:"",phone:""},addUser:{identity:"",credential:""},desserts:[]}},computed:{headers:function(){return[{text:"ID",align:"center",value:"uid"},{text:this.$t("App.nickname"),value:"nickname",align:"center"},{text:this.$t("App.identity"),value:"login_name",align:"center"},{text:this.$t("App.phone"),value:"phone",align:"center"},{text:this.$t("App.email"),value:"email",align:"center"},{text:this.$t("Sys.createTime"),value:"create_time",align:"center"},{text:this.$t("Sys.updateTime"),value:"update_time",align:"center"},{text:this.$t("App.userStatus"),value:"status",align:"center"},{text:this.$t("Sys.operation"),sortable:!1,align:"center"}]}},methods:{init:function(){var e=this;n.a.all([this.$api.user.get(),this.$api.role.get()]).then(n.a.spread(function(t,a){e.$data.desserts=t.data.map(function(e){return e.status=!!e.status,e}),e.$data.roles=a.data}))},setState:function(e){var t=this,a=e.item.status?1:0;this.$api.user.setState(e.item.uid,a).then(function(){t.$notify.success("edit success",{timeout:500})})},editUser:function(e){var t=this;this.$api.user.getUserById(e.item.uid).then(function(e){t.$data.user=e.data,t.$data.role_ids=e.data.role_ids,t.$data.dialog=!0})},resetPwd:function(e){var t=this;this.$api.user.resetPwd(e.item.uid).then(function(){t.$notify.success("reset password success",{timeout:500})})},createOrUpdateUser:function(){var e=this;if(this.$data.user.role_ids=this.$data.role_ids.join(","),this.$data.isCreate){var t=Object.assign({},this.$data.user,this.$data.addUser);this.$api.user.createUser(t).then(function(){e.$data.isCreate=!1,e.$api.user.get().then(function(t){e.$data.desserts=t.data}),e.$notify.success("create success",{timeout:500})})}else this.$api.user.editUser(this.$data.user.uid,this.$data.user).then(function(){e.$notify.success("edit success",{timeout:500})});this.dialog=!1},createUser:function(){var e=this,t=["nickname","email","phone"];Object.keys(this.$data.user).forEach(function(a){0<=t.indexOf(a)&&e.$refs[a].reset()}),this.$data.role_ids=[],this.$data.isCreate=!0,this.$data.dialog=!0},close:function(){this.$data.isCreate&&(this.$data.isCreate=!1),this.$data.dialog=!1}},created:function(){this.init()}},c=l,d=a("2877"),o=a("6544"),u=a.n(o),p=a("c6a6"),h=a("8336"),f=a("b0af"),m=a("99d9"),v=a("12b2"),$=a("a523"),x=a("8fea"),_=a("169a"),b=a("0e8f"),g=a("a722"),y=a("9910"),k=a("2677"),C=a("71d9"),w=a("2a7f"),U=Object(d["a"])(c,s,i,!1,null,null,null);t["default"]=U.exports;u()(U,{VAutocomplete:p["a"],VBtn:h["a"],VCard:f["a"],VCardActions:m["a"],VCardText:m["b"],VCardTitle:v["a"],VContainer:$["a"],VDataTable:x["a"],VDialog:_["a"],VFlex:b["a"],VLayout:g["a"],VSpacer:y["a"],VTextField:k["a"],VToolbar:C["a"],VToolbarTitle:w["a"]})}}]);
//# sourceMappingURL=chunk-2d0d9fbf.243d0da1.js.map